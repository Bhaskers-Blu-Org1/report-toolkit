{"componentChunkName":"component---src-pages-cli-index-mdx","path":"/cli/","result":{"pageContext":{"frontmatter":{"title":"report-toolkit Command-Line Usage"},"relativePagePath":"/cli/index.mdx","titleType":"append","MdxNode":{"id":"26e130d5-5a13-5116-b358-d6cc91a0dcb2","children":[],"parent":"bf5d09f0-9dd1-5ae6-a066-c7079fa32559","internal":{"content":"---\ntitle: report-toolkit Command-Line Usage\n---\n\nimport {panel} from 'gatsby-theme-carbon/src/components/Tabs/Tabs.module.scss';\nimport {InlineCode} from '../../components';\nimport {doDontCode, mono} from './index.module.scss';\n\n<!-- note: if your paragraph contains markdown, it must start with markdown; this is\nwhy we see strong (`**`) in some places where otherwise it would not be needed -->\n\n<PageDescription>\n\n**<Metadata prop=\"packageName\"/>** provides a command-line utility, <Metadata prop=\"executable\"/>. This usage documentation provides detailed descriptions of all _commands_ and options for <Metadata prop=\"executable\"/>.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>General Usage Guidelines</AnchorLink>\n  <AnchorLink>Global Options</AnchorLink>\n  <AnchorLink to=\"#the-diff-command\">\n    The <InlineCode>diff</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-inspect-command\">\n    The <InlineCode>inspect</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-redact-command\">\n    The <InlineCode>redact</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-transform-command\">\n    The <InlineCode>transform</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#common-output-options\">Common Output Options</AnchorLink>\n  <AnchorLink to=\"#transformer-specific-options\">\n    Transformer-Specific Options\n  </AnchorLink>\n</AnchorLinks>\n\n## General Usage Guidelines\n\n### <Metadata prop=\"executable\"/> Requires a Command\n\nYou must supply a _command_ to <Metadata prop=\"executable\"/>. A _single_ command must immediately follow the <Metadata prop=\"executable\"/> executable.\n\n<DoDontRow>\n  <DoDont\n    type=\"do\"\n    color=\"dark\"\n    captionTitle=\"Correct Usage\"\n    caption=\"Command is first argument\"\n    text=\"rtk redact report-file.json\"\n    className={doDontCode}\n  />\n  <DoDont\n    type=\"dont\"\n    color=\"dark\"\n    captionTitle=\"Incorrect Usage\"\n    caption=\"Command in wrong position\"\n    text=\"rtk report-file.json redact\"\n    className={doDontCode}\n  />\n</DoDontRow>\n\n### Available Commands\n\nThe command must be one of the following:\n\n- [`diff`](#the-diff-command)\n- [`inspect`](#the-inspect-command)\n- [`redact`](#the-redact-command)\n- [`transform`](#the-transform-command)\n\n<InlineNotification kind=\"info\">\n\n_As of v0.5.1_, the `list-rules` command (for the time being; see [#80](https://github.com/IBM/report-toolkit/issues/80)) will output the built-in rules for [`inspect`](#the-inspect-command) and their descriptions.\n\n</InlineNotification>\n\n### About Flags\n\nAny \"boolean\" flag--an option without an argument--can be explicitly disabled by prepending `--no-` to the option name. For example, to explicitly disable color output when comparing `report-A.json` to `report-B.json`:\n\n```bash\nrtk --no-color diff report-A.json report-B.json\n```\n\nThis is applicable to both [global](#global-options) and command-specific boolean flags.\n\n### About Configuration\n\nConfiguration will be read from a JavaScript file named `.rtkrc.js` or `rtk.config.js`. If one is not found in the current working directory, the search for one of these files will continue until one is found, the current user's \"home\" directory is found, or the root of the filesystem is found (see [cosmiconfig](https://npm.im/cosmiconfig) for further details on the file-finding algorithm).\n\n<InlineNotification kind=\"warning\">\n\n_As of v0.5.1_, only CommonJS-style `.js` is allowed; the config file must use `module.exports` or `exports`, and cannot be an ECMAScript module.\n\n</InlineNotification>\n\nOther formats, including JSON, YAML, TOML, etc., are explicitly _not_ supported. Configuration cannot be stored in a `package.json`, either. Sorry!\n\n_TODO: Write configuration docs and link to them; see [#66](https://github.com/IBM/report-toolkit/issues/66)_\n\n## Global Options\n\nThese options can be used in tandem with any command.\n\nIn the case of `--help` and `--version`, no command is required.\n\n### `--rc </path/to/.rtkrc.js>`\n\nSupply an explicit path to a <Metadata prop=\"packageName\"/> config file. This option is only necessary if your config file has non-standard location and/or name.\n\n#### Example: Run `inspect` Using Config `my-config.js`\n\n```bash\nrtk --rc my-config.js inspect report-A.json\n```\n\nThe same restrictions as described above in [About Configuration](#about-configuration) apply.\n\n### `--color` / `--no-color`\n\nColor output is enabled [by default](#defaults-of-diff) when a TTY is available. If there is no TTY (like in a subprocess, or when piped), specify `--color` to force color.\n\n<InlineNotification kind=\"warning\">\n\nSome transformations do not support color output (e.g., `csv`), and `--color` will be ignored. In <Metadata prop=\"executable\"/>, color is intended for human-readable output.\n\n</InlineNotification>\n\n#### Example: Force Color Output When Comparing `report-A.json` and `report-B.json`\n\n```bash\nrtk diff --color report-A.json report-B.json\n```\n\n#### Example: Disable Color Output When Inspecting `report.json`\n\n```bash\nrtk inspect --no-color report.json\n```\n\n### `--debug` / `--verbose`\n\nEnables debug output. `--verbose` is an alias of `--debug`; their behavior is identical.\n\nThis can be noisy.\n\nUsing `--debug` is equivalent to setting the environment variable `DEBUG=rtk*`. Further granularity can be achieved by appending package or module name(s) separated by colons, e.g., `DEBUG=rtk:cli*` will show all debug output from the [CLI package](https://github.com/IBM/report-toolkit/tree/master/packages/cli). Package names follow a pattern of `rtk:<package name>[:..submodule name or path]`.\n\nDebug output is sent to `STDERR`.\n\n<InlineNotification kind=\"info\">\n\nSee the documentation of the [debug](https://github.com/visionmedia/debug#readme) package for more about controlling its behavior via the `DEBUG` environment variable.\n\n</InlineNotification>\n\n### `--help`\n\nDisplays help text, then exits. `--help` can be used by itself (to see global\noptions and the list of commands), or combined with any command to see command-specific options.\n\n#### Example: Print Help Text\n\n```bash\nrtk --help\n```\n\n#### Example: Print Help Text for `inspect` Command\n\n```bash\nrtk inspect --help\n```\n\n### `--version`\n\nOutputs the version of <Metadata prop=\"executable\"/> to `STDOUT` then exits.\n\n#### Example: Print Version of Installed `rtk` Executable\n\n```bash\nrtk --version\n```\n\n## The `diff` Command\n\nThe `diff` command compares two (2) Diagnostic Report files and outputs the difference. Unlike a typical `diff` tool, the output is purpose-built for comparing reports.\n\n### Basic Usage: `rtk diff <file-A> <file-B>`\n\nTo use `diff` with the [defaults](#defaults-of-diff):\n\n```bash\nrtk diff report-A.json report-B.json\n```\n\n`diff` requires two (2) paths to Diagnostic Report files.\n\n### `diff`: Output Description\n\nThe output of `diff` contains four (4) fields:\n\n- **Op**: Shorthand for \"operation\":\n  - **(M)odified**: The field exists in both reports, but differs\n  - **(A)dded**: The field exists in the _first_ report only\n  - **(D)eleted**: The field exists in the _second_ report only\n- **Field**: The field path which differs, represented in \"dot\" notation.\n- **_(path to first report)_**: The value in the field of the first report (if present)\n- **_(path to second report)_**: The value in the field of the second report (if present)\n\nIn the default, tabular output, each \"Op\" and \"Field\" pair will be color-coded based on its operation. \"Modified\" is yellow, \"deleted\" is red, and \"added\" is green.\n\nUnlike other commands, the output of `diff` depends on the order of the two files given; the results will be the same, but reversed.\n\n### `diff`: Defaults\n\nThis section describes the default behavior of `rtk diff`.\n\n- Output: a human-readable, **tabular view** (in color, where available)\n- Secrets are **redacted** from Diagnostic Reports _before_ comparison\n- To increase the signal-to-noise ratio, `diff` **includes only this following set of fields**:\n  - `header`\n  - `environmentVariables`\n  - `userLimits`\n  - `sharedObejcts`\n  - `libuv`\n- Furthermore, these nested fields are **excluded from the `header` field**:\n  - `header.filename`\n  - `header.dumpEventTime`\n  - `header.dumpEventTimeStamp`\n  - `header.cpus`\n\n### `diff`-specific Options\n\nThis group of options allows the user to fine-tune which fields (properties) `rtk diff` considers when comparing report files.\n\n<InlineNotification kind=\"warning\">\n\nWhen using these options, please note that _exclusion_ of fields **takes precedence** over _inclusion_ of fields. In other words: include fields _first_, _then_ exclude from your list. In this way, you can include a top level field (like `header`), then exclude a nested field (like `header.processId`). For example, `rtk diff -i header -x header.processId report-A.json report-B.json` will compare `header`, but not its nested property, `header.processId`.\n\n</InlineNotification>\n\n### `diff`: Options\n\n#### `--includeProp <field>, -i <field>`\n\nExplicitly _include_ one or more fields in the comparison. If this option is used, <Metadata prop=\"executable\"/> will _only_ consider the field(s) specified (and any nested fields or array items).\n\nThis option can be used multiple times.\n\n##### Example: Include a Single Field\n\nTo _only_ compare field `header` (and its nested fields) when comparing `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff --includeProp header report-A.json report-B.json\n```\n\n##### Example: Include Multiple fields\n\nTo _only_ compare fields `header.commandLine` (and its items) and `header.cwd` when comparing `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff -i header.commandLine -i header.cwd report-A.json report-B.json\n```\n\n#### `--excludeProp <field>, -x <field>`\n\nExplicitly _exclude_ one or more fields in the comparison. If this option is used, <Metadata prop=\"executable\"/> will consider the [defaults](#defaults-of-diff), then further exclude the specified fields.\n\nThis option can be used multiple times.\n\n##### Example: Exclude a Single Field\n\nTo exclude field `header` (and its nested fields) when comparing `report-A.json` and `report-B.json` (but otherwise use [the defaults](#defaults-of-diff)):\n\n```bash\nrtk diff --excludeProp header report-A.json report-B.json\n```\n\n##### Example: Exclude Multiple Fields\n\nTo exclude fields `header.commandLine` (and its items) and `header.cwd` when comparing `report-A.json` and `report-B.json` (but otherwise use [the defaults](#defaults-of-diff)):\n\n```bash\nrtk diff -x header.commandLine -x header.cwd report-A.json report-B.json\n```\n\n#### `--all`\n\nBy default, <Metadata prop=\"executable\"/> [excludes certain properties](#defaults-of-diff) to reduce noise. Use `--all` if you would like to include the _entire_ Diagnostic Report when comparing.\n\n`--all` cannot be used with `--includeProp/-i` or `--excludeProp/-x`.\n\n##### Example: Compare All Fields\n\nTo compare the entirety of `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff --all report-A.json report-B.json\n```\n\n### `diff`: Additional Options\n\n`diff` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## The `inspect` Command\n\nThe `inspect` command runs heuristics, called _Rules_, on one or more Diagnostic Reports. If a Rule finds a potential problem, it will output a message. Some messages may be warnings, and others may be purely informational.\n\nThe purpose of `inspect` is to automate the discovery of potential problems in a Node.js process. These may range from runaway resource consumption, to nonstandard configuration, to hung event loops. If a developer can closely inspect a Diagnostic Report to uncover a problem, a Rule can automate this process. Also: developers like to automate things.\n\n`inspect` draws heavily from [ESLint](https://eslint.org). Like ESLint, <Metadata prop=\"packageName\"/> ships with built-in Rules and a recommended configuration. Also like ESLint, developers can create and distribute their own Rules.\n\n### Basic Usage: `rtk inspect <file..>`\n\nTo use `inspect` with the default \"recommended\" configuration:\n\n```bash\nrtk inspect report.json\n```\n\nTo use `inspect` with the default \"recommended\" configuration across three (3) report files:\n\n```bash\nrtk inspect report-A.json report-B.json report-C.json\n```\n\n### `inspect`: Output Description\n\n`inspect`'s output contains four (4) fields:\n\n- **Severity**: The \"severity\" of a Message. One of the following, in decreasing order of severity:\n  - **ERROR**: The associated Message highlights an issue that _should_ be investigated.\n  - **WARNING**: The associated Message highlights an issue that _might_ need investigation.\n  - **INFO**: The associated Message is purely informational.\n- **File**: The Diagnostic Report file referenced, or `(multiple files)` if the Message is aggregated from across multiple files.\n- **Rule**: The name (unique identifier) of the Rule which sent the Message.\n- **Message**: A human-readable explanation of the issue.\n\nIn the default, tabular output, the severities `ERROR`, `WARNING` and `INFO` will be respectively highlighted in red, yellow, and blue.\n\n### `inspect`: Defaults\n\n- Output: a human-readable, **tabular view** (in color, where available)\n- Secrets are **redacted** from Diagnostic Reports _before_ Rule execution\n- The minimum severity level is `WARNING`; `INFO` messages will be suppressed.\n- _Without a configuration file_ present, the \"recommended\" set of Rules will be run:\n  - At the time of this writing, this is _all built-in Rules_.\n  - Each Rule uses its default configuration.\n- _With a configuration file_ present, the Rules used and configurations thereof will be as declared by the configuration file.\n\n### `inspect`: Options\n\n`inspect` allows filtering of Messages by their _severity_.\n\n#### `--severity <severity>`\n\nThe minimum threshold for Message severity, as defined by `severity`. In other words, any Message with a severity \"lower\" than this will be suppressed.\n\nAllowed values for `severity`, in descending order of severity:\n\n- `ERROR`\n- `WARNING`\n- `INFO`\n\nThe `severity` argument is case-insensitive. The default `severity` is `WARNING`.\n\n##### Example: Inspect `report.json`, Including \"Info\", \"Warning\" and \"Error\"-severity Messages\n\n```bash\nrtk inspect --severity info report.json\n```\n\n##### Example: Inspect `report.json`, Including Only \"Error\"-severity Messages\n\n```bash\nrtk inspect --severity ERROR report.json\n```\n\n### `inspect`: Additional Options\n\n`inspect` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## The `redact` Command\n\nNode.js Diagnostic Reports contain the entirety of a process' execution environment in the `environmentVariables` field.\n\n`environmentVariables` can contain things like API keys, tokens, and other secrets. It's important to keep these secrets from _leaking_, and a Node.js Diagnostic Report is one potential source of leaks.\n\n<InlineNotification kind=\"warning\">\n\nUse the `redact` command before transmitting a Node.js Diagnostic Report file anywhere!\n\n</InlineNotification>\n\nWhen provided one or more report files, `redact` command _redacts_ known secrets and secret-ish values from this field--while retaining the key name. Values are replaced with the string `[REDACTED]`.\n\nThe `redact` command is essentially a _shortcut_ for `transform -t redact`.\n\n### Basic Usage: `rtk redact <file..>`\n\nThis command will echo a redacted version of `report.json` to `STDOUT`:\n\n```bash\nrtk redact report.json\n```\n\n### `redact`: Output Description\n\nThe output is the input--Node.js Diagnostic Reports--but with secrets redacted from the `environmentVariables` field.\n\n### `redact`: Defaults\n\nThe default behavior of `redact` is to output the same format which Node.js Diagnostic Report files use: pretty-printed JSON.\n\n### `redact`: Options\n\n#### `--replace`\n\nRedacts file(s) _in-place_. In other words, this reads the file(s), redacts secrets, and overwrites them.\n\nWhen `--replace` is used, `redact` will not echo anything to `STDOUT`.\n\n### `redact`: Additional Options\n\n`redact` does _not_ support transformers, and is limited to JSON output! If you need to use a transformer, use [the `transform` command](#the-transform-command) instead (which redacts by default).\n\nSince `redact` defaults to pretty-printed output, it supports [`--no-pretty`](#-pretty).\n\n## The `transform` Command\n\n`transform` converts a Node.js Diagnostic Report into a different format.\n\nWhile [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater) can be used with the output of other commands, the `transform` command works _directly_ on report files.\n\nAs with any other command, reports will be redacted _by default_.\n\n### Basic Usage: `rtk transform <file..>`\n\nTo transform Node.js Diagnostic Report file `report.json` into _non-pretty-printed_ (ugly?) JSON:\n\n```bash\nrtk transform report.json\n```\n\nThe behavior of the below example is _identical_ to `rtk redact report.json`:\n\n```bash\nrtk transform --pretty report.json\n```\n\nGenerally, you will use the [`--transform <transformer>`](#-transform-lesstransformergreater-t-lesstransformergreater) option to change the transformer. Notably, the `transform` command works with _any_ transformer.\n\nTo transform Node.js Diagnostic Report file `report.json` into CSV (for reasons):\n\n```bash\nrtk transform report.json -t csv\n```\n\n### `transform`: Output Description\n\nThe output of `transform` is based entirely on which transform(s) are used.\n\n### `transform`: Defaults\n\nThe default behavior of `transform` is to output the original Node.js Diagnostic Report file(s), redacted, and in compressed (non-pretty-printed) JSON format.\n\n### `transform`: Additional Options\n\n`transform` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## Common Output Options\n\n_Most_ of these options are available across _most_ commands. Exceptions include:\n\n- The `redact` and `transform` commands do not allow `-o`, due to ambiguous behavior when given multiple files; use `--replace` instead.\n- The `redact` command doesn't allow `--show-secrets-unsafe`, because that would be pointless.\n\n#### `--output <file>, -o <file>`\n\nRedirect output to a file.\n\n#### Example: Write Output of Comparison of `report-A.json` and `report-B.json` to File\n\n```bash\nrtk diff report-A.json report-B.json -o diff-output.txt\n```\n\nThe above is equivalent to the following in a POSIX shell:\n\n```bash\nrtk diff report-A.json report-B.json > diff-output.txt\n```\n\n#### Example: Write Output of Comparison of `report-A.json` and `report-B.json` to File, in Pretty-Printed JSON Format\n\n```bash\nrtk diff report-A.json report-B.json --transform json --pretty -o diff-output.json\n```\n\n#### `--show-secrets-unsafe`\n\nThis will disable automatic redaction of secrets from the `environmentVariables` field.\n\n<InlineNotification kind=\"error\">\n\nThe `--show-secrets-unsafe` option is--as you may have guessed--_unsafe_. Don't use it unless you're _absolutely sure_ that you need to!\n\n</InlineNotification>\n\n##### Example: Disable Redacting of Secrets\n\n```bash\n# danger!\nrtk diff --show-secrets-unsafe report-A.json report-B.json\n```\n\n#### `--transform <transformer>, -t <transformer>`\n\nTransforms command output into various formats.\n\nThis option can be repeated, creating a _transformer chain_. This works when the output of a transformer is valid input for a subsequent transformer. Note that each transformer can only be used _once_.\n\nAllowed values of `transformer`:\n\n<dl className={mono}>\n  <dt>csv</dt>\n  <dd>CSV output; nested fields are expanded, so each field has its own column.</dd>\n  <dt>filter</dt>\n  <dd>\n\nFilter the output by including/excluding fields. _Only works with the [`transform`](#the-transform-command) command_.\n\n</dd>\n  <dt>json</dt>\n  <dd>JSON output</dd>\n  <dt>newline</dt>\n  <dd>\n\nOutput in newline-delimited JSON format (A.K.A. `ndjson` and other aliases); useful for streams.\n\n</dd>\n  <dt>stack-hash</dt>\n  <dd>\n\nTakes a hash of the stack trace from the `javascriptStack` field, and outputs in a JSON format suitable for collection of metrics. _Only works with the [`transform`](#the-transform-command) command_.\n\n</dd>\n  <dt>table</dt>\n  <dd>Output in colorful, human-readable tabular format <em>(default behavior)</em>.</dd>\n</dl>\n\n<InlineNotification kind=\"warning\">\n\n**Not all commands support all transformers!** Please refer to the list of supported transformers as shown in `rtk <command> --help`.\n\n</InlineNotification>\n\n##### Example: Output Diff of `report-A.json` and `report-B.json` as CSV\n\n```bash\nrtk diff -t csv report-A.json report-B.json\n```\n\n##### Example: Output Inspection of `report.json` as JSON\n\n```bash\nrtk inspect -t json report.json\n```\n\n##### Example: Output Diff of `report-A.json` and `report-B.json` as Newline-Delimited JSON\n\n```bash\nrtk diff -t newline report-A.json report-B.json\n```\n\n##### Example: Output Inspection of `report-A.json` and `report-B.json` in Tabular Format (Default)\n\n```bash\nrtk inspect -t table report-A.json report-B.json\n```\n\nFor further customization of transformer output, see [Transformer-Specific Options](#transformer-specific-options).\n\n## Transformer-Specific Options\n\nTransformers, when used either via the `transform` command, or the `--transform / -t` option, have their own options. These options _only_ apply when the transformer in question is used.\n\n### `json` Transformer Options\n\nThe `json` transformer has only one (1) option, [`--pretty`](#--pretty).\n\n#### `--pretty`\n\nPretty-prints the JSON output. When used with `diff`, this defaults to `false`.\n\n##### Example: Output Inspection of `report.json` as Pretty-Printed JSON\n\n```bash\nrtk inspect -t json --pretty report.json\n```\n\n##### Example: Redact and Output `report.json` as Non-Pretty-Printed JSON\n\n```bash\nrtk redact --no-pretty report.json\n```\n\n### `table` Transformer Options\n\nThese options allow tweaking of the tabular display.\n\n#### `--max-width <columns>`\n\nSets the maximum width, `columns`, of the table output. By default, the table will stretch the length of the terminal. In a non-TTY situation, the default width will be 80 characters.\n\nIf `--no-truncate` is used, this option will be ignored.\n\n##### Example: Ouptut Diff of `report-A.json` and `report-B.json` in Tabular Format, With a Max Table Width of 72 Characters\n\n```bash\nrtk diff -t table --max-width 72 report-A.json report-B.json\n```\n\n#### `--truncate`\n\nTruncate the values displayed in the table to fit the columns. This is enabled by default, as certain fields (e.g., `environmentVariables.PATH`) are likely to be very long.\n\n##### Example: Output Inspection of `report.json` in Tabular Format, Without Truncating Values\n\n```bash\nrtk inspect -t table --no-truncate report.json\n```\n","type":"Mdx","contentDigest":"92d78f2523dfcb95fc47ae422edc8860","counter":129,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"report-toolkit Command-Line Usage"},"exports":{},"rawBody":"---\ntitle: report-toolkit Command-Line Usage\n---\n\nimport {panel} from 'gatsby-theme-carbon/src/components/Tabs/Tabs.module.scss';\nimport {InlineCode} from '../../components';\nimport {doDontCode, mono} from './index.module.scss';\n\n<!-- note: if your paragraph contains markdown, it must start with markdown; this is\nwhy we see strong (`**`) in some places where otherwise it would not be needed -->\n\n<PageDescription>\n\n**<Metadata prop=\"packageName\"/>** provides a command-line utility, <Metadata prop=\"executable\"/>. This usage documentation provides detailed descriptions of all _commands_ and options for <Metadata prop=\"executable\"/>.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>General Usage Guidelines</AnchorLink>\n  <AnchorLink>Global Options</AnchorLink>\n  <AnchorLink to=\"#the-diff-command\">\n    The <InlineCode>diff</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-inspect-command\">\n    The <InlineCode>inspect</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-redact-command\">\n    The <InlineCode>redact</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#the-transform-command\">\n    The <InlineCode>transform</InlineCode> Command\n  </AnchorLink>\n  <AnchorLink to=\"#common-output-options\">Common Output Options</AnchorLink>\n  <AnchorLink to=\"#transformer-specific-options\">\n    Transformer-Specific Options\n  </AnchorLink>\n</AnchorLinks>\n\n## General Usage Guidelines\n\n### <Metadata prop=\"executable\"/> Requires a Command\n\nYou must supply a _command_ to <Metadata prop=\"executable\"/>. A _single_ command must immediately follow the <Metadata prop=\"executable\"/> executable.\n\n<DoDontRow>\n  <DoDont\n    type=\"do\"\n    color=\"dark\"\n    captionTitle=\"Correct Usage\"\n    caption=\"Command is first argument\"\n    text=\"rtk redact report-file.json\"\n    className={doDontCode}\n  />\n  <DoDont\n    type=\"dont\"\n    color=\"dark\"\n    captionTitle=\"Incorrect Usage\"\n    caption=\"Command in wrong position\"\n    text=\"rtk report-file.json redact\"\n    className={doDontCode}\n  />\n</DoDontRow>\n\n### Available Commands\n\nThe command must be one of the following:\n\n- [`diff`](#the-diff-command)\n- [`inspect`](#the-inspect-command)\n- [`redact`](#the-redact-command)\n- [`transform`](#the-transform-command)\n\n<InlineNotification kind=\"info\">\n\n_As of v0.5.1_, the `list-rules` command (for the time being; see [#80](https://github.com/IBM/report-toolkit/issues/80)) will output the built-in rules for [`inspect`](#the-inspect-command) and their descriptions.\n\n</InlineNotification>\n\n### About Flags\n\nAny \"boolean\" flag--an option without an argument--can be explicitly disabled by prepending `--no-` to the option name. For example, to explicitly disable color output when comparing `report-A.json` to `report-B.json`:\n\n```bash\nrtk --no-color diff report-A.json report-B.json\n```\n\nThis is applicable to both [global](#global-options) and command-specific boolean flags.\n\n### About Configuration\n\nConfiguration will be read from a JavaScript file named `.rtkrc.js` or `rtk.config.js`. If one is not found in the current working directory, the search for one of these files will continue until one is found, the current user's \"home\" directory is found, or the root of the filesystem is found (see [cosmiconfig](https://npm.im/cosmiconfig) for further details on the file-finding algorithm).\n\n<InlineNotification kind=\"warning\">\n\n_As of v0.5.1_, only CommonJS-style `.js` is allowed; the config file must use `module.exports` or `exports`, and cannot be an ECMAScript module.\n\n</InlineNotification>\n\nOther formats, including JSON, YAML, TOML, etc., are explicitly _not_ supported. Configuration cannot be stored in a `package.json`, either. Sorry!\n\n_TODO: Write configuration docs and link to them; see [#66](https://github.com/IBM/report-toolkit/issues/66)_\n\n## Global Options\n\nThese options can be used in tandem with any command.\n\nIn the case of `--help` and `--version`, no command is required.\n\n### `--rc </path/to/.rtkrc.js>`\n\nSupply an explicit path to a <Metadata prop=\"packageName\"/> config file. This option is only necessary if your config file has non-standard location and/or name.\n\n#### Example: Run `inspect` Using Config `my-config.js`\n\n```bash\nrtk --rc my-config.js inspect report-A.json\n```\n\nThe same restrictions as described above in [About Configuration](#about-configuration) apply.\n\n### `--color` / `--no-color`\n\nColor output is enabled [by default](#defaults-of-diff) when a TTY is available. If there is no TTY (like in a subprocess, or when piped), specify `--color` to force color.\n\n<InlineNotification kind=\"warning\">\n\nSome transformations do not support color output (e.g., `csv`), and `--color` will be ignored. In <Metadata prop=\"executable\"/>, color is intended for human-readable output.\n\n</InlineNotification>\n\n#### Example: Force Color Output When Comparing `report-A.json` and `report-B.json`\n\n```bash\nrtk diff --color report-A.json report-B.json\n```\n\n#### Example: Disable Color Output When Inspecting `report.json`\n\n```bash\nrtk inspect --no-color report.json\n```\n\n### `--debug` / `--verbose`\n\nEnables debug output. `--verbose` is an alias of `--debug`; their behavior is identical.\n\nThis can be noisy.\n\nUsing `--debug` is equivalent to setting the environment variable `DEBUG=rtk*`. Further granularity can be achieved by appending package or module name(s) separated by colons, e.g., `DEBUG=rtk:cli*` will show all debug output from the [CLI package](https://github.com/IBM/report-toolkit/tree/master/packages/cli). Package names follow a pattern of `rtk:<package name>[:..submodule name or path]`.\n\nDebug output is sent to `STDERR`.\n\n<InlineNotification kind=\"info\">\n\nSee the documentation of the [debug](https://github.com/visionmedia/debug#readme) package for more about controlling its behavior via the `DEBUG` environment variable.\n\n</InlineNotification>\n\n### `--help`\n\nDisplays help text, then exits. `--help` can be used by itself (to see global\noptions and the list of commands), or combined with any command to see command-specific options.\n\n#### Example: Print Help Text\n\n```bash\nrtk --help\n```\n\n#### Example: Print Help Text for `inspect` Command\n\n```bash\nrtk inspect --help\n```\n\n### `--version`\n\nOutputs the version of <Metadata prop=\"executable\"/> to `STDOUT` then exits.\n\n#### Example: Print Version of Installed `rtk` Executable\n\n```bash\nrtk --version\n```\n\n## The `diff` Command\n\nThe `diff` command compares two (2) Diagnostic Report files and outputs the difference. Unlike a typical `diff` tool, the output is purpose-built for comparing reports.\n\n### Basic Usage: `rtk diff <file-A> <file-B>`\n\nTo use `diff` with the [defaults](#defaults-of-diff):\n\n```bash\nrtk diff report-A.json report-B.json\n```\n\n`diff` requires two (2) paths to Diagnostic Report files.\n\n### `diff`: Output Description\n\nThe output of `diff` contains four (4) fields:\n\n- **Op**: Shorthand for \"operation\":\n  - **(M)odified**: The field exists in both reports, but differs\n  - **(A)dded**: The field exists in the _first_ report only\n  - **(D)eleted**: The field exists in the _second_ report only\n- **Field**: The field path which differs, represented in \"dot\" notation.\n- **_(path to first report)_**: The value in the field of the first report (if present)\n- **_(path to second report)_**: The value in the field of the second report (if present)\n\nIn the default, tabular output, each \"Op\" and \"Field\" pair will be color-coded based on its operation. \"Modified\" is yellow, \"deleted\" is red, and \"added\" is green.\n\nUnlike other commands, the output of `diff` depends on the order of the two files given; the results will be the same, but reversed.\n\n### `diff`: Defaults\n\nThis section describes the default behavior of `rtk diff`.\n\n- Output: a human-readable, **tabular view** (in color, where available)\n- Secrets are **redacted** from Diagnostic Reports _before_ comparison\n- To increase the signal-to-noise ratio, `diff` **includes only this following set of fields**:\n  - `header`\n  - `environmentVariables`\n  - `userLimits`\n  - `sharedObejcts`\n  - `libuv`\n- Furthermore, these nested fields are **excluded from the `header` field**:\n  - `header.filename`\n  - `header.dumpEventTime`\n  - `header.dumpEventTimeStamp`\n  - `header.cpus`\n\n### `diff`-specific Options\n\nThis group of options allows the user to fine-tune which fields (properties) `rtk diff` considers when comparing report files.\n\n<InlineNotification kind=\"warning\">\n\nWhen using these options, please note that _exclusion_ of fields **takes precedence** over _inclusion_ of fields. In other words: include fields _first_, _then_ exclude from your list. In this way, you can include a top level field (like `header`), then exclude a nested field (like `header.processId`). For example, `rtk diff -i header -x header.processId report-A.json report-B.json` will compare `header`, but not its nested property, `header.processId`.\n\n</InlineNotification>\n\n### `diff`: Options\n\n#### `--includeProp <field>, -i <field>`\n\nExplicitly _include_ one or more fields in the comparison. If this option is used, <Metadata prop=\"executable\"/> will _only_ consider the field(s) specified (and any nested fields or array items).\n\nThis option can be used multiple times.\n\n##### Example: Include a Single Field\n\nTo _only_ compare field `header` (and its nested fields) when comparing `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff --includeProp header report-A.json report-B.json\n```\n\n##### Example: Include Multiple fields\n\nTo _only_ compare fields `header.commandLine` (and its items) and `header.cwd` when comparing `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff -i header.commandLine -i header.cwd report-A.json report-B.json\n```\n\n#### `--excludeProp <field>, -x <field>`\n\nExplicitly _exclude_ one or more fields in the comparison. If this option is used, <Metadata prop=\"executable\"/> will consider the [defaults](#defaults-of-diff), then further exclude the specified fields.\n\nThis option can be used multiple times.\n\n##### Example: Exclude a Single Field\n\nTo exclude field `header` (and its nested fields) when comparing `report-A.json` and `report-B.json` (but otherwise use [the defaults](#defaults-of-diff)):\n\n```bash\nrtk diff --excludeProp header report-A.json report-B.json\n```\n\n##### Example: Exclude Multiple Fields\n\nTo exclude fields `header.commandLine` (and its items) and `header.cwd` when comparing `report-A.json` and `report-B.json` (but otherwise use [the defaults](#defaults-of-diff)):\n\n```bash\nrtk diff -x header.commandLine -x header.cwd report-A.json report-B.json\n```\n\n#### `--all`\n\nBy default, <Metadata prop=\"executable\"/> [excludes certain properties](#defaults-of-diff) to reduce noise. Use `--all` if you would like to include the _entire_ Diagnostic Report when comparing.\n\n`--all` cannot be used with `--includeProp/-i` or `--excludeProp/-x`.\n\n##### Example: Compare All Fields\n\nTo compare the entirety of `report-A.json` and `report-B.json`:\n\n```bash\nrtk diff --all report-A.json report-B.json\n```\n\n### `diff`: Additional Options\n\n`diff` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## The `inspect` Command\n\nThe `inspect` command runs heuristics, called _Rules_, on one or more Diagnostic Reports. If a Rule finds a potential problem, it will output a message. Some messages may be warnings, and others may be purely informational.\n\nThe purpose of `inspect` is to automate the discovery of potential problems in a Node.js process. These may range from runaway resource consumption, to nonstandard configuration, to hung event loops. If a developer can closely inspect a Diagnostic Report to uncover a problem, a Rule can automate this process. Also: developers like to automate things.\n\n`inspect` draws heavily from [ESLint](https://eslint.org). Like ESLint, <Metadata prop=\"packageName\"/> ships with built-in Rules and a recommended configuration. Also like ESLint, developers can create and distribute their own Rules.\n\n### Basic Usage: `rtk inspect <file..>`\n\nTo use `inspect` with the default \"recommended\" configuration:\n\n```bash\nrtk inspect report.json\n```\n\nTo use `inspect` with the default \"recommended\" configuration across three (3) report files:\n\n```bash\nrtk inspect report-A.json report-B.json report-C.json\n```\n\n### `inspect`: Output Description\n\n`inspect`'s output contains four (4) fields:\n\n- **Severity**: The \"severity\" of a Message. One of the following, in decreasing order of severity:\n  - **ERROR**: The associated Message highlights an issue that _should_ be investigated.\n  - **WARNING**: The associated Message highlights an issue that _might_ need investigation.\n  - **INFO**: The associated Message is purely informational.\n- **File**: The Diagnostic Report file referenced, or `(multiple files)` if the Message is aggregated from across multiple files.\n- **Rule**: The name (unique identifier) of the Rule which sent the Message.\n- **Message**: A human-readable explanation of the issue.\n\nIn the default, tabular output, the severities `ERROR`, `WARNING` and `INFO` will be respectively highlighted in red, yellow, and blue.\n\n### `inspect`: Defaults\n\n- Output: a human-readable, **tabular view** (in color, where available)\n- Secrets are **redacted** from Diagnostic Reports _before_ Rule execution\n- The minimum severity level is `WARNING`; `INFO` messages will be suppressed.\n- _Without a configuration file_ present, the \"recommended\" set of Rules will be run:\n  - At the time of this writing, this is _all built-in Rules_.\n  - Each Rule uses its default configuration.\n- _With a configuration file_ present, the Rules used and configurations thereof will be as declared by the configuration file.\n\n### `inspect`: Options\n\n`inspect` allows filtering of Messages by their _severity_.\n\n#### `--severity <severity>`\n\nThe minimum threshold for Message severity, as defined by `severity`. In other words, any Message with a severity \"lower\" than this will be suppressed.\n\nAllowed values for `severity`, in descending order of severity:\n\n- `ERROR`\n- `WARNING`\n- `INFO`\n\nThe `severity` argument is case-insensitive. The default `severity` is `WARNING`.\n\n##### Example: Inspect `report.json`, Including \"Info\", \"Warning\" and \"Error\"-severity Messages\n\n```bash\nrtk inspect --severity info report.json\n```\n\n##### Example: Inspect `report.json`, Including Only \"Error\"-severity Messages\n\n```bash\nrtk inspect --severity ERROR report.json\n```\n\n### `inspect`: Additional Options\n\n`inspect` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## The `redact` Command\n\nNode.js Diagnostic Reports contain the entirety of a process' execution environment in the `environmentVariables` field.\n\n`environmentVariables` can contain things like API keys, tokens, and other secrets. It's important to keep these secrets from _leaking_, and a Node.js Diagnostic Report is one potential source of leaks.\n\n<InlineNotification kind=\"warning\">\n\nUse the `redact` command before transmitting a Node.js Diagnostic Report file anywhere!\n\n</InlineNotification>\n\nWhen provided one or more report files, `redact` command _redacts_ known secrets and secret-ish values from this field--while retaining the key name. Values are replaced with the string `[REDACTED]`.\n\nThe `redact` command is essentially a _shortcut_ for `transform -t redact`.\n\n### Basic Usage: `rtk redact <file..>`\n\nThis command will echo a redacted version of `report.json` to `STDOUT`:\n\n```bash\nrtk redact report.json\n```\n\n### `redact`: Output Description\n\nThe output is the input--Node.js Diagnostic Reports--but with secrets redacted from the `environmentVariables` field.\n\n### `redact`: Defaults\n\nThe default behavior of `redact` is to output the same format which Node.js Diagnostic Report files use: pretty-printed JSON.\n\n### `redact`: Options\n\n#### `--replace`\n\nRedacts file(s) _in-place_. In other words, this reads the file(s), redacts secrets, and overwrites them.\n\nWhen `--replace` is used, `redact` will not echo anything to `STDOUT`.\n\n### `redact`: Additional Options\n\n`redact` does _not_ support transformers, and is limited to JSON output! If you need to use a transformer, use [the `transform` command](#the-transform-command) instead (which redacts by default).\n\nSince `redact` defaults to pretty-printed output, it supports [`--no-pretty`](#-pretty).\n\n## The `transform` Command\n\n`transform` converts a Node.js Diagnostic Report into a different format.\n\nWhile [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater) can be used with the output of other commands, the `transform` command works _directly_ on report files.\n\nAs with any other command, reports will be redacted _by default_.\n\n### Basic Usage: `rtk transform <file..>`\n\nTo transform Node.js Diagnostic Report file `report.json` into _non-pretty-printed_ (ugly?) JSON:\n\n```bash\nrtk transform report.json\n```\n\nThe behavior of the below example is _identical_ to `rtk redact report.json`:\n\n```bash\nrtk transform --pretty report.json\n```\n\nGenerally, you will use the [`--transform <transformer>`](#-transform-lesstransformergreater-t-lesstransformergreater) option to change the transformer. Notably, the `transform` command works with _any_ transformer.\n\nTo transform Node.js Diagnostic Report file `report.json` into CSV (for reasons):\n\n```bash\nrtk transform report.json -t csv\n```\n\n### `transform`: Output Description\n\nThe output of `transform` is based entirely on which transform(s) are used.\n\n### `transform`: Defaults\n\nThe default behavior of `transform` is to output the original Node.js Diagnostic Report file(s), redacted, and in compressed (non-pretty-printed) JSON format.\n\n### `transform`: Additional Options\n\n`transform` supports the following common output options:\n\n- [`--output`](#-output-lessfilegreater-o-lessfilegreater)\n- [`--show-secrets-unsafe`](#-show-secrets-unsafe)\n- [`--transform`](#-transform-lesstransformergreater-t-lesstransformergreater)\n\n## Common Output Options\n\n_Most_ of these options are available across _most_ commands. Exceptions include:\n\n- The `redact` and `transform` commands do not allow `-o`, due to ambiguous behavior when given multiple files; use `--replace` instead.\n- The `redact` command doesn't allow `--show-secrets-unsafe`, because that would be pointless.\n\n#### `--output <file>, -o <file>`\n\nRedirect output to a file.\n\n#### Example: Write Output of Comparison of `report-A.json` and `report-B.json` to File\n\n```bash\nrtk diff report-A.json report-B.json -o diff-output.txt\n```\n\nThe above is equivalent to the following in a POSIX shell:\n\n```bash\nrtk diff report-A.json report-B.json > diff-output.txt\n```\n\n#### Example: Write Output of Comparison of `report-A.json` and `report-B.json` to File, in Pretty-Printed JSON Format\n\n```bash\nrtk diff report-A.json report-B.json --transform json --pretty -o diff-output.json\n```\n\n#### `--show-secrets-unsafe`\n\nThis will disable automatic redaction of secrets from the `environmentVariables` field.\n\n<InlineNotification kind=\"error\">\n\nThe `--show-secrets-unsafe` option is--as you may have guessed--_unsafe_. Don't use it unless you're _absolutely sure_ that you need to!\n\n</InlineNotification>\n\n##### Example: Disable Redacting of Secrets\n\n```bash\n# danger!\nrtk diff --show-secrets-unsafe report-A.json report-B.json\n```\n\n#### `--transform <transformer>, -t <transformer>`\n\nTransforms command output into various formats.\n\nThis option can be repeated, creating a _transformer chain_. This works when the output of a transformer is valid input for a subsequent transformer. Note that each transformer can only be used _once_.\n\nAllowed values of `transformer`:\n\n<dl className={mono}>\n  <dt>csv</dt>\n  <dd>CSV output; nested fields are expanded, so each field has its own column.</dd>\n  <dt>filter</dt>\n  <dd>\n\nFilter the output by including/excluding fields. _Only works with the [`transform`](#the-transform-command) command_.\n\n</dd>\n  <dt>json</dt>\n  <dd>JSON output</dd>\n  <dt>newline</dt>\n  <dd>\n\nOutput in newline-delimited JSON format (A.K.A. `ndjson` and other aliases); useful for streams.\n\n</dd>\n  <dt>stack-hash</dt>\n  <dd>\n\nTakes a hash of the stack trace from the `javascriptStack` field, and outputs in a JSON format suitable for collection of metrics. _Only works with the [`transform`](#the-transform-command) command_.\n\n</dd>\n  <dt>table</dt>\n  <dd>Output in colorful, human-readable tabular format <em>(default behavior)</em>.</dd>\n</dl>\n\n<InlineNotification kind=\"warning\">\n\n**Not all commands support all transformers!** Please refer to the list of supported transformers as shown in `rtk <command> --help`.\n\n</InlineNotification>\n\n##### Example: Output Diff of `report-A.json` and `report-B.json` as CSV\n\n```bash\nrtk diff -t csv report-A.json report-B.json\n```\n\n##### Example: Output Inspection of `report.json` as JSON\n\n```bash\nrtk inspect -t json report.json\n```\n\n##### Example: Output Diff of `report-A.json` and `report-B.json` as Newline-Delimited JSON\n\n```bash\nrtk diff -t newline report-A.json report-B.json\n```\n\n##### Example: Output Inspection of `report-A.json` and `report-B.json` in Tabular Format (Default)\n\n```bash\nrtk inspect -t table report-A.json report-B.json\n```\n\nFor further customization of transformer output, see [Transformer-Specific Options](#transformer-specific-options).\n\n## Transformer-Specific Options\n\nTransformers, when used either via the `transform` command, or the `--transform / -t` option, have their own options. These options _only_ apply when the transformer in question is used.\n\n### `json` Transformer Options\n\nThe `json` transformer has only one (1) option, [`--pretty`](#--pretty).\n\n#### `--pretty`\n\nPretty-prints the JSON output. When used with `diff`, this defaults to `false`.\n\n##### Example: Output Inspection of `report.json` as Pretty-Printed JSON\n\n```bash\nrtk inspect -t json --pretty report.json\n```\n\n##### Example: Redact and Output `report.json` as Non-Pretty-Printed JSON\n\n```bash\nrtk redact --no-pretty report.json\n```\n\n### `table` Transformer Options\n\nThese options allow tweaking of the tabular display.\n\n#### `--max-width <columns>`\n\nSets the maximum width, `columns`, of the table output. By default, the table will stretch the length of the terminal. In a non-TTY situation, the default width will be 80 characters.\n\nIf `--no-truncate` is used, this option will be ignored.\n\n##### Example: Ouptut Diff of `report-A.json` and `report-B.json` in Tabular Format, With a Max Table Width of 72 Characters\n\n```bash\nrtk diff -t table --max-width 72 report-A.json report-B.json\n```\n\n#### `--truncate`\n\nTruncate the values displayed in the table to fit the columns. This is enabled by default, as certain fields (e.g., `environmentVariables.PATH`) are likely to be very long.\n\n##### Example: Output Inspection of `report.json` in Tabular Format, Without Truncating Values\n\n```bash\nrtk inspect -t table --no-truncate report.json\n```\n","fileAbsolutePath":"/Users/boneskull/projects/boneskull/report-toolkit/packages/docs/src/pages/cli/index.mdx"}}}}